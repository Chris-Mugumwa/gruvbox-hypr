# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃                    Autostart Configuration                  ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

source = ~/.config/hypr/config/defaults.conf

# Autostart wiki https://wiki.hyprland.org/0.45.0/Configuring/Keywords/#executing #

# ## D-Bus environment setup (must run first) - ESSENTIAL, DO NOT DISABLE
exec-once = systemctl --user import-environment &
exec-once = hash dbus-update-activation-environment 2>/dev/null &
exec-once = dbus-update-activation-environment --systemd &

# ============================================================
# MINIMAL STARTUP CONFIGURATION
# ============================================================
# Most programs are commented out for initial testing.
# Once Hyprland starts successfully, uncomment programs one by one
# to identify which (if any) are causing startup issues.

# Terminal - ESSENTIAL (uncomment at least one)
exec-once = kitty &

# Wallpaper daemon - Can cause hangs if display isn't ready
# exec-once = swww-daemon &

# Notification daemon - Can block if D-Bus isn't ready
# exec-once = swaync &

# Idle handler - Can conflict with other power management
# exec-once = hypridle -c ~/.config/hypr/hypridle.conf &

# Status bar - Can block waiting for modules
# exec-once = waybar &

# Input method - Only needed for non-English keyboards
# exec-once = fcitx5 -d &

# Network manager applet
# exec-once = nm-applet --indicator &

# Volume/brightness overlay bar
# exec-once = bash -c "mkfifo /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob 2>/dev/null; tail -f /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob | wob & disown" &

# PolicyKit authentication agent
# exec-once = /usr/lib/polkit-kde-authentication-agent-1 &

# Battery management (laptop only)
# exec-once = bash -c "sleep 3 && ~/Scripts/batinfo.sh" &

# ============================================================
# TO RE-ENABLE PROGRAMS AFTER SUCCESSFUL STARTUP:
# ============================================================
# 1. Start Hyprland with this minimal config
# 2. Once it works, uncomment programs ONE AT A TIME
# 3. Test after each one to find any problem programs
# 4. Recommended order: waybar → swww → swaync → rest

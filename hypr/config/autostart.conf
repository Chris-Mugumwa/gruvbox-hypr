# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃                    Autostart Configuration                  ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

source = ~/.config/hypr/config/defaults.conf

# Autostart wiki https://wiki.hyprland.org/0.45.0/Configuring/Keywords/#executing #

# ## D-Bus environment setup (must run first)
exec-once = systemctl --user import-environment &
exec-once = hash dbus-update-activation-environment 2>/dev/null &
exec-once = dbus-update-activation-environment --systemd &

exec-once = swww-daemon &
exec-once = swaync &
exec-once = hypridle -c ~/.config/hypr/hypridle.conf &
exec-once = waybar &
exec-once = fcitx5 -d &
exec-once = nm-applet --indicator &
exec-once = bash -c "mkfifo /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob 2>/dev/null; tail -f /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob | wob & disown" &
exec-once = /usr/lib/polkit-kde-authentication-agent-1 &

#for battery management (delayed to ensure D-Bus is ready)
exec-once = bash -c "sleep 3 && ~/Scripts/batinfo.sh" &

# ## Idle configuration (using hypridle - see line 16)
# exec-once = $idlehandler  # Disabled: using hypridle instead to avoid conflicts
